<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>爱的五种语言测试</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        :root {
            --primary: #e74c3c;
            --primary-light: #ff6b6b;
            --secondary: #3498db;
            --accent: #9b59b6;
            --light: #f8f9fa;
            --dark: #2c3e50;
            --gray: #7f8c8d;
            --success: #2ecc71;
            --border-radius: 12px;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
        }
        
        body {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
            padding: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .container {
            max-width: 800px;
            width: 100%;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            margin-bottom: 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
            padding: 25px 20px;
            text-align: center;
            position: relative;
        }
        
        header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--secondary) 0%, var(--accent) 100%);
        }
        
        h1 {
            font-size: 28px;
            margin-bottom: 8px;
            font-weight: 700;
        }
        
        .subtitle {
            font-size: 15px;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .instructions {
            background-color: #ffeaea;
            padding: 18px;
            border-radius: 8px;
            margin: 20px;
            border-left: 4px solid var(--primary);
        }
        
        .instructions h2 {
            color: var(--primary);
            margin-bottom: 10px;
            font-size: 17px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .instructions p {
            margin-bottom: 8px;
            font-size: 14px;
            line-height: 1.5;
        }
        
        .languages-intro {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
            margin: 18px 20px;
        }
        
        .language-card {
            background: white;
            border-radius: 8px;
            padding: 12px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            border-top: 3px solid var(--primary);
            transition: var(--transition);
        }
        
        .language-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .language-icon {
            font-size: 22px;
            color: var(--primary);
            margin-bottom: 8px;
        }
        
        .language-name {
            font-weight: 600;
            font-size: 13px;
            margin-bottom: 5px;
        }
        
        .language-desc {
            font-size: 11px;
            color: var(--gray);
            line-height: 1.4;
        }
        
        .progress-section {
            padding: 0 20px;
            margin-bottom: 18px;
        }
        
        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
            color: var(--gray);
        }
        
        .progress-bar {
            height: 8px;
            background: #edf2f7;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(90deg, var(--primary) 0%, var(--secondary) 100%);
            width: 0%;
            transition: var(--transition);
            border-radius: 4px;
        }
        
        .question-section {
            padding: 0 20px 20px;
        }
        
        .question-container {
            display: none;
        }
        
        .question-container.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .question {
            background-color: var(--light);
            padding: 20px;
            border-radius: var(--border-radius);
            margin-bottom: 18px;
            border-left: 4px solid var(--primary);
        }
        
        .question-number {
            display: inline-block;
            background: var(--primary);
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            text-align: center;
            line-height: 28px;
            margin-bottom: 12px;
            font-size: 13px;
        }
        
        .question-text {
            font-weight: 600;
            margin-bottom: 18px;
            font-size: 17px;
            color: var(--dark);
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .option {
            display: flex;
            align-items: center;
            padding: 14px;
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .option:hover {
            border-color: var(--primary-light);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
        }
        
        .option.selected {
            border-color: var(--primary);
            background-color: #fff5f5;
        }
        
        .option input {
            display: none;
        }
        
        .option-text {
            margin-left: 10px;
            font-size: 15px;
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            padding: 0 20px 20px;
            gap: 10px;
        }
        
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
            flex: 1;
            justify-content: center;
            font-size: 15px;
        }
        
        .btn-prev {
            background: #f1f5f9;
            color: var(--gray);
        }
        
        .btn-prev:hover {
            background: #e2e8f0;
        }
        
        .btn-next {
            background: var(--primary);
            color: white;
        }
        
        .btn-next:hover {
            background: var(--primary-light);
        }
        
        .btn-submit {
            background: var(--success);
            color: white;
        }
        
        .btn-submit:hover {
            background: #27ae60;
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .result-container {
            display: none;
            padding: 25px;
            text-align: center;
        }
        
        .result-container.active {
            display: block;
            animation: fadeIn 0.8s ease;
        }
        
        .result-header {
            margin-bottom: 25px;
        }
        
        .result-title {
            font-size: 26px;
            color: var(--primary);
            margin-bottom: 15px;
        }
        
        .primary-language {
            font-size: 32px;
            font-weight: 800;
            color: var(--primary);
            margin: 15px 0;
        }
        
        .language-description {
            color: var(--gray);
            max-width: 600px;
            margin: 0 auto 20px;
            line-height: 1.6;
            font-size: 15px;
        }
        
        .all-languages {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin: 25px 0;
        }
        
        .language-result {
            display: flex;
            align-items: center;
            background: white;
            padding: 14px 16px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            transition: var(--transition);
        }
        
        .language-result:hover {
            transform: translateX(3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .language-result.primary {
            border-left: 5px solid var(--primary);
        }
        
        .language-rank {
            font-weight: 700;
            font-size: 17px;
            color: var(--primary);
            width: 26px;
        }
        
        .language-name {
            flex: 1;
            text-align: left;
            font-weight: 600;
            font-size: 15px;
        }
        
        .language-score {
            font-weight: 700;
            color: var(--dark);
            font-size: 15px;
        }
        
        .language-bar {
            flex: 2;
            height: 10px;
            background: #e2e8f0;
            border-radius: 5px;
            overflow: hidden;
            margin: 0 12px;
        }
        
        .language-fill {
            height: 100%;
            border-radius: 5px;
            transition: width 1s ease;
        }
        
        .advice-section {
            background: #f8f9fa;
            padding: 18px;
            border-radius: 10px;
            margin-top: 25px;
            text-align: left;
        }
        
        .advice-title {
            color: var(--primary);
            margin-bottom: 12px;
            font-size: 18px;
        }
        
        .advice-list {
            list-style-type: none;
        }
        
        .advice-item {
            padding: 10px 0;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }
        
        .advice-item:last-child {
            border-bottom: none;
        }
        
        .advice-icon {
            color: var(--primary);
            margin-top: 3px;
            font-size: 14px;
        }
        
        .advice-text {
            font-size: 14px;
            line-height: 1.5;
        }
        
        .restart-btn {
            background: var(--secondary);
            color: white;
            margin: 20px auto 0;
            max-width: 200px;
        }
        
        .restart-btn:hover {
            background: #2980b9;
        }
        
        footer {
            text-align: center;
            color: var(--gray);
            font-size: 13px;
            margin-top: 15px;
            padding: 0 10px;
        }
        
        /* 移动端优化 */
        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .container {
                border-radius: 10px;
            }
            
            header {
                padding: 20px 15px;
            }
            
            h1 {
                font-size: 24px;
            }
            
            .subtitle {
                font-size: 14px;
            }
            
            .instructions {
                margin: 15px;
                padding: 15px;
            }
            
            .question-section, .progress-section, .navigation {
                padding-left: 15px;
                padding-right: 15px;
            }
            
            .languages-intro {
                grid-template-columns: 1fr;
                margin: 15px;
            }
            
            .option {
                padding: 12px;
            }
            
            .question {
                padding: 18px;
            }
            
            .question-text {
                font-size: 16px;
            }
            
            .option-text {
                font-size: 14px;
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 14px;
            }
            
            .result-container {
                padding: 20px 15px;
            }
            
            .result-title {
                font-size: 22px;
            }
            
            .primary-language {
                font-size: 28px;
            }
            
            .language-description {
                font-size: 14px;
            }
            
            .language-result {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
                padding: 12px;
            }
            
            .language-bar {
                width: 100%;
                margin: 5px 0;
            }
            
            .language-name, .language-score {
                font-size: 14px;
            }
            
            .advice-section {
                padding: 15px;
            }
            
            .advice-title {
                font-size: 16px;
            }
            
            .advice-text {
                font-size: 13px;
            }
        }
        
        /* 小屏幕手机优化 */
        @media (max-width: 360px) {
            h1 {
                font-size: 22px;
            }
            
            .question-text {
                font-size: 15px;
            }
            
            .option-text {
                font-size: 13px;
            }
            
            .btn {
                padding: 8px 12px;
                font-size: 13px;
            }
            
            .primary-language {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>爱的五种语言测试</h1>
            <p class="subtitle">发现你表达和接收爱的主要方式 | 改善人际关系</p>
        </header>
        
        <div class="instructions">
            <h2><i class="fas fa-heart"></i> 测试说明</h2>
            <p>每个人都有自己表达和接收爱的主要方式，了解这些"爱的语言"可以帮助改善你的人际关系。</p>
            <p>请根据你的真实感受选择最符合你的选项，测试共有30题，大约需要10-15分钟。</p>
            <p>测试结果将显示你的主要爱语以及所有五种爱语的得分情况。</p>
        </div>
        
        <div class="languages-intro">
            <div class="language-card">
                <div class="language-icon"><i class="fas fa-comment-dots"></i></div>
                <div class="language-name">肯定的言语</div>
                <div class="language-desc">通过赞美、鼓励和肯定的话语表达爱</div>
            </div>
            <div class="language-card">
                <div class="language-icon"><i class="fas fa-clock"></i></div>
                <div class="language-name">精心的时刻</div>
                <div class="language-desc">通过高质量的陪伴和关注表达爱</div>
            </div>
            <div class="language-card">
                <div class="language-icon"><i class="fas fa-gift"></i></div>
                <div class="language-name">接受礼物</div>
                <div class="language-desc">通过送礼物和惊喜表达爱</div>
            </div>
            <div class="language-card">
                <div class="language-icon"><i class="fas fa-hands-helping"></i></div>
                <div class="language-name">服务的行动</div>
                <div class="language-desc">通过实际行动和帮助表达爱</div>
            </div>
            <div class="language-card">
                <div class="language-icon"><i class="fas fa-hands"></i></div>
                <div class="language-name">身体的接触</div>
                <div class="language-desc">通过拥抱、牵手等身体接触表达爱</div>
            </div>
        </div>
        
        <div class="progress-section">
            <div class="progress-info">
                <span>完成进度</span>
                <span id="progress-text">0/30</span>
            </div>
            <div class="progress-bar">
                <div class="progress" id="progress"></div>
            </div>
        </div>
        
        <form id="love-language-form">
            <div class="question-section">
                <!-- 问题将通过JavaScript动态生成 -->
            </div>
            
            <div class="navigation">
                <button type="button" class="btn btn-prev" id="prev-btn" disabled>
                    <i class="fas fa-arrow-left"></i> 上一题
                </button>
                <button type="button" class="btn btn-next" id="next-btn">
                    下一题 <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </form>
        
        <div class="result-container" id="result-container">
            <div class="result-header">
                <h2 class="result-title">你的主要爱语是</h2>
                <div class="primary-language" id="primary-language">精心的时刻</div>
                <p class="language-description" id="language-description">对你来说，爱是通过高质量的陪伴和关注来表达的。当你爱的人愿意花时间与你相处，全神贯注地倾听你，与你一起做喜欢的事情，你会感到被爱和被重视。</p>
            </div>
            
            <div class="all-languages">
                <!-- 语言结果将通过JavaScript动态生成 -->
            </div>
            
            <div class="advice-section">
                <h3 class="advice-title"><i class="fas fa-lightbulb"></i> 如何运用你的爱语</h3>
                <ul class="advice-list">
                    <li class="advice-item">
                        <i class="fas fa-check-circle advice-icon"></i>
                        <div class="advice-text">主动与伴侣分享你的爱语，并了解对方的爱语</div>
                    </li>
                    <li class="advice-item">
                        <i class="fas fa-check-circle advice-icon"></i>
                        <div class="advice-text">尝试用对方的爱语表达爱，即使这让你感到不自然</div>
                    </li>
                    <li class="advice-item">
                        <i class="fas fa-check-circle advice-icon"></i>
                        <div class="advice-text">定期与伴侣讨论彼此的爱语需求是否得到满足</div>
                    </li>
                    <li class="advice-item">
                        <i class="fas fa-check-circle advice-icon"></i>
                        <div class="advice-text">记住，爱语可能会随着时间或关系阶段而变化</div>
                    </li>
                </ul>
            </div>
            
            <button class="btn restart-btn" id="restart-btn">
                <i class="fas fa-redo"></i> 重新测试
            </button>
        </div>
    </div>
    
    <footer>
        <p>© 2023 爱的五种语言测试 | 本测试基于盖瑞·查普曼博士的理论 | 结果仅供参考</p>
    </footer>

    <script>
        // 爱的五种语言测试题目
        const questions = [
            {
                text: "我喜欢收到写满赞美和鼓励的小纸条",
                language: "肯定的言语"
            },
            {
                text: "我喜欢与亲近的人拥抱、牵手或其他的身体接触",
                language: "身体的接触"
            },
            {
                text: "我喜欢收到礼物，无论大小",
                language: "接受礼物"
            },
            {
                text: "当有人主动帮我做家务或完成任务时，我感到被爱",
                language: "服务的行动"
            },
            {
                text: "当有人愿意花时间专注地陪伴我时，我感到被爱",
                language: "精心的时刻"
            },
            {
                text: "我喜欢听到别人对我说\"我爱你\"",
                language: "肯定的言语"
            },
            {
                text: "我喜欢与亲近的人一起做事情，比如散步或聊天",
                language: "精心的时刻"
            },
            {
                text: "收到意外的礼物让我感到特别",
                language: "接受礼物"
            },
            {
                text: "当有人帮我按摩或轻抚我的背时，我感到被关心",
                language: "身体的接触"
            },
            {
                text: "当有人主动帮我处理麻烦事时，我感到被爱",
                language: "服务的行动"
            },
            {
                text: "我喜欢听到别人肯定我的外表或成就",
                language: "肯定的言语"
            },
            {
                text: "我喜欢与亲近的人一起旅行或体验新事物",
                language: "精心的时刻"
            },
            {
                text: "我喜欢收到对我有特殊意义的礼物",
                language: "接受礼物"
            },
            {
                text: "当有人在我累的时候主动帮忙，我感到被爱",
                language: "服务的行动"
            },
            {
                text: "当有人轻拍我的肩膀或给我一个拥抱时，我感到被关心",
                language: "身体的接触"
            },
            {
                text: "我喜欢听到别人对我说感谢和欣赏的话",
                language: "肯定的言语"
            },
            {
                text: "我喜欢与亲近的人一起静静地坐着聊天",
                language: "精心的时刻"
            },
            {
                text: "收到精心挑选的礼物让我感到对方真的了解我",
                language: "接受礼物"
            },
            {
                text: "当有人帮我处理我不喜欢做的任务时，我感到被爱",
                language: "服务的行动"
            },
            {
                text: "当有人搂着我的肩膀或握住我的手时，我感到安心",
                language: "身体的接触"
            },
            {
                text: "我喜欢听到别人对我说鼓励的话",
                language: "肯定的言语"
            },
            {
                text: "我喜欢与亲近的人一起享受美食或看电影",
                language: "精心的时刻"
            },
            {
                text: "收到手工制作的礼物让我感到特别",
                language: "接受礼物"
            },
            {
                text: "当有人主动帮我跑腿或处理杂事时，我感到被爱",
                language: "服务的行动"
            },
            {
                text: "当有人轻抚我的头发或给我一个拥抱时，我感到被关心",
                language: "身体的接触"
            },
            {
                text: "我喜欢听到别人对我说亲切和关爱的话",
                language: "肯定的言语"
            },
            {
                text: "我喜欢与亲近的人一起度过不受打扰的时光",
                language: "精心的时刻"
            },
            {
                text: "收到对方花心思准备的礼物让我感到被重视",
                language: "接受礼物"
            },
            {
                text: "当有人主动帮我处理生活中的琐事时，我感到被爱",
                language: "服务的行动"
            },
            {
                text: "当有人给我一个温暖的拥抱时，我感到被爱和被接受",
                language: "身体的接触"
            }
        ];

        // 爱的语言描述
        const languageDescriptions = {
            "肯定的言语": "对你来说，爱是通过赞美、鼓励和肯定的话语来表达的。当你爱的人用言语表达欣赏、感谢和爱意时，你会感到被爱和被重视。批评或冷漠的言语则可能对你造成较深的伤害。",
            "精心的时刻": "对你来说，爱是通过高质量的陪伴和关注来表达的。当你爱的人愿意花时间与你相处，全神贯注地倾听你，与你一起做喜欢的事情，你会感到被爱和被重视。分心或被忽视则会让你感到受伤。",
            "接受礼物": "对你来说，爱是通过送礼物和惊喜来表达的。当你爱的人花心思挑选或制作礼物送给你时，你会感到被爱和被理解。礼物的价值不在于价格，而在于其中蕴含的心意和象征意义。",
            "服务的行动": "对你来说，爱是通过实际行动和帮助来表达的。当你爱的人主动帮你分担家务、处理难题或为你做事时，你会感到被爱和被关心。懒惰或不愿帮忙则会让你感到失望。",
            "身体的接触": "对你来说，爱是通过拥抱、牵手、亲吻等身体接触来表达的。当你爱的人通过身体接触表达爱意时，你会感到被爱和安全。身体上的拒绝或冷漠则会让你感到受伤。"
        };

        // 初始化变量
        let currentQuestion = 0;
        const answers = {
            "肯定的言语": 0,
            "精心的时刻": 0,
            "接受礼物": 0,
            "服务的行动": 0,
            "身体的接触": 0
        };

        // DOM元素
        const questionSection = document.querySelector('.question-section');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const progress = document.getElementById('progress');
        const progressText = document.getElementById('progress-text');
        const resultContainer = document.getElementById('result-container');
        const loveLanguageForm = document.getElementById('love-language-form');
        const restartBtn = document.getElementById('restart-btn');
        const primaryLanguageElement = document.getElementById('primary-language');
        const languageDescriptionElement = document.getElementById('language-description');
        const allLanguagesElement = document.querySelector('.all-languages');

        // 初始化测试
        function initTest() {
            renderQuestion(currentQuestion);
            updateProgress();
        }

        // 渲染问题
        function renderQuestion(index) {
            questionSection.innerHTML = '';
            
            const questionContainer = document.createElement('div');
            questionContainer.className = `question-container ${index === currentQuestion ? 'active' : ''}`;
            
            const question = questions[index];
            
            const questionHTML = `
                <div class="question">
                    <div class="question-number">${index + 1}</div>
                    <div class="question-text">${question.text}</div>
                    <div class="options">
                        <div class="option" data-value="3">
                            <input type="radio" name="q${index}" id="q${index}_3" value="3">
                            <label for="q${index}_3"></label>
                            <div class="option-text">非常符合</div>
                        </div>
                        <div class="option" data-value="2">
                            <input type="radio" name="q${index}" id="q${index}_2" value="2">
                            <label for="q${index}_2"></label>
                            <div class="option-text">比较符合</div>
                        </div>
                        <div class="option" data-value="1">
                            <input type="radio" name="q${index}" id="q${index}_1" value="1">
                            <label for="q${index}_1"></label>
                            <div class="option-text">一般</div>
                        </div>
                        <div class="option" data-value="0">
                            <input type="radio" name="q${index}" id="q${index}_0" value="0">
                            <label for="q${index}_0"></label>
                            <div class="option-text">不太符合</div>
                        </div>
                    </div>
                </div>
            `;
            
            questionContainer.innerHTML = questionHTML;
            questionSection.appendChild(questionContainer);
            
            // 添加选项点击事件
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    // 移除其他选项的选中状态
                    this.parentNode.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    
                    // 选中当前选项
                    this.classList.add('selected');
                    this.querySelector('input').checked = true;
                    
                    // 保存答案
                    const selectedValue = parseInt(this.getAttribute('data-value'));
                    answers[question.language] += selectedValue;
                    
                    // 更新进度 - 修复最后一题统计问题
                    updateProgress();
                });
            });
            
            // 更新按钮状态
            updateButtons();
        }

        // 更新进度
        function updateProgress() {
            // 计算已回答的问题数量
            let answeredCount = 0;
            for (let i = 0; i <= currentQuestion; i++) {
                const question = questions[i];
                // 如果这个问题有答案，就计入已回答
                if (answers[question.language] > 0) {
                    answeredCount++;
                }
            }
            
            // 修复：确保最后一题被正确统计
            if (currentQuestion === questions.length - 1) {
                const lastQuestion = questions[questions.length - 1];
                if (answers[lastQuestion.language] > 0) {
                    answeredCount = questions.length;
                }
            }
            
            const progressPercent = (answeredCount / questions.length) * 100;
            progress.style.width = `${progressPercent}%`;
            progressText.textContent = `${answeredCount}/${questions.length}`;
        }

        // 更新按钮状态
        function updateButtons() {
            prevBtn.disabled = currentQuestion === 0;
            
            if (currentQuestion === questions.length - 1) {
                nextBtn.innerHTML = '查看结果 <i class="fas fa-heart"></i>';
                nextBtn.className = 'btn btn-submit';
            } else {
                nextBtn.innerHTML = '下一题 <i class="fas fa-arrow-right"></i>';
                nextBtn.className = 'btn btn-next';
            }
        }

        // 下一题
        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                renderQuestion(currentQuestion);
                updateProgress();
            } else {
                showResults();
            }
        }

        // 上一题
        function prevQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                renderQuestion(currentQuestion);
                updateProgress();
            }
        }

        // 显示结果
        function showResults() {
            // 计算主要爱语
            let primaryLanguage = "";
            let maxScore = 0;
            
            for (const language in answers) {
                if (answers[language] > maxScore) {
                    maxScore = answers[language];
                    primaryLanguage = language;
                }
            }
            
            // 更新结果页面
            primaryLanguageElement.textContent = primaryLanguage;
            languageDescriptionElement.textContent = languageDescriptions[primaryLanguage];
            
            // 创建所有语言的得分展示
            allLanguagesElement.innerHTML = '';
            
            // 将语言按得分排序
            const sortedLanguages = Object.entries(answers)
                .sort((a, b) => b[1] - a[1])
                .map(([language, score]) => ({ language, score }));
            
            // 找到最高分用于计算百分比
            const maxPossibleScore = Math.max(...Object.values(answers));
            
            sortedLanguages.forEach((item, index) => {
                const languageResult = document.createElement('div');
                languageResult.className = `language-result ${item.language === primaryLanguage ? 'primary' : ''}`;
                
                const percentage = (item.score / maxPossibleScore) * 100;
                
                languageResult.innerHTML = `
                    <div class="language-rank">${index + 1}</div>
                    <div class="language-name">${item.language}</div>
                    <div class="language-bar">
                        <div class="language-fill" style="width: ${percentage}%; background: ${item.language === primaryLanguage ? 'var(--primary)' : 'var(--secondary)'};"></div>
                    </div>
                    <div class="language-score">${item.score}分</div>
                `;
                
                allLanguagesElement.appendChild(languageResult);
            });
            
            // 隐藏测试表单，显示结果
            loveLanguageForm.style.display = 'none';
            resultContainer.classList.add('active');
            
            // 滚动到顶部，确保结果可见
            window.scrollTo(0, 0);
        }

        // 重新开始测试
        function restartTest() {
            // 重置变量
            currentQuestion = 0;
            for (let key in answers) {
                answers[key] = 0;
            }
            
            // 重置UI
            loveLanguageForm.style.display = 'block';
            resultContainer.classList.remove('active');
            
            // 重新初始化测试
            initTest();
            
            // 滚动到顶部
            window.scrollTo(0, 0);
        }

        // 事件监听
        prevBtn.addEventListener('click', prevQuestion);
        nextBtn.addEventListener('click', nextQuestion);
        restartBtn.addEventListener('click', restartTest);

        // 初始化测试
        initTest();
    </script>
</body>
</html>